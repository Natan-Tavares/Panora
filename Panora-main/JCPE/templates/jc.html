{% extends "base.html" %}
{% load static %}

{% block title %}Meu JC{% endblock %}

{% block content %}

<style>
    body{margin:0;font-family:Arial,sans-serif;background:#fff}
    header{background:#c30000;padding:10px 0;display:flex;justify-content:center}
    header img{height:45px}
    .perfil-section{text-align:center;padding:20px 0 10px}
    .foto-container{display:flex;justify-content:center}
    .foto{width:120px;height:120px;border-radius:50%;object-fit:cover}
    .username{margin-top:10px;font-size:14px;color:#555}
    .menu-lista{width:90%;margin:10px auto 20px}
    .menu-lista a{display:flex;justify-content:space-between;padding:14px;border-bottom:1px solid #ddd;color:#222;text-decoration:none;font-size:15px}
    .menu-lista i{margin-right:10px}
    .bloco{padding:12px 15px;border-bottom:6px solid #f6f6f6}
    .bloco h3{margin:5px 0 12px;font-size:16px;color:#444}
    .salvos{display:flex;gap:12px;overflow-x:auto;padding-bottom:8px}
    .salvo-card{min-width:180px}
    .salvo-card img{width:100%;height:100px;object-fit:cover;border-radius:6px}
    .salvo-card p{font-size:13px;color:#333;margin-top:6px}
    .tags{display:flex;flex-wrap:wrap;gap:6px}
    .tags span{background:#f2f2f2;padding:6px 10px;border-radius:12px;font-size:12px}
    .colunistas{display:flex;gap:14px;overflow-x:auto;padding-bottom:10px}
    .colunista{text-align:center;min-width:90px}
    .colunista img{width:65px;height:65px;border-radius:50%;object-fit:cover}
    .colunista p{font-size:12px}
    footer{background:#e6e6e6;text-align:center;padding:15px 5px;font-size:12px;color:#444}
    footer img{width:160px;margin:10px 0}
    footer .copy{margin-top:10px;font-size:11px}
    .menu-bottom{position:fixed;bottom:0;width:100%;background:#fff;border-top:1px solid #ccc;display:flex;justify-content:space-around;padding:12px 0;font-size:20px}
</style>

<section class="perfil-section">
    <div class="foto-container">

        {% if user.perfil.foto %}
            <img src="{{ user.perfil.foto.url }}" class="foto">
        {% else %}
            <img src="{% static 'img/user.jpg' %}" class="foto">
        {% endif %}
    </div>

    <p class="username">@{{ user.username }}</p>

    <div class="menu-lista">
        <a href="{% url 'editar_conta' %}">
            <i class="fa-solid fa-user"></i> Editar Perfil
        </a>
        <a href="#">
            <i class="fa-solid fa-bell"></i> Notificações
        </a>
        <a href="#">
            <i class="fa-solid fa-universal-access"></i> Acessibilidade
        </a>
        <a href="{% url 'logout' %}">
            <i class="fa-solid fa-right-from-bracket"></i> Sair
        </a>
    </div>
</section>

<section class="bloco">
    <h3>SALVOS</h3>

    <div class="salvos">
        {% if noticias_salvas %}
            {% for item in noticias_salvas %}
                <div class="salvo-card">

                    {% if item.noticia.imagem %}
                        <img src="{{ item.noticia.imagem.url }}">
                    {% else %}
                        <img src="{% static 'img/sem_capa.jpg' %}">
                    {% endif %}

                    <p>{{ item.noticia.titulo|truncatechars:50 }}</p>
                </div>
            {% endfor %}

        {% else %}
            <p style="font-size:13px;color:#777;">Você ainda não salvou matérias.</p>
        {% endif %}
    </div>
</section>

<section class="bloco">
    <h3>FAVORITOS</h3>

    <h4 style="margin-top:10px">TAGS</h4>

    <div class="tags">
        {% if tags %}
            {% for tag in tags %}
                <span>{{ tag.tag }}</span>
            {% endfor %}
        {% else %}
            <span>Você ainda não favoritou tags.</span>
        {% endif %}
    </div>
</section>

<section class="bloco">
    <h3>COLUNISTAS</h3>

    <div class="colunistas">
        {% if colunistas %}
            {% for col in colunistas %}
                <div class="colunista">
                    <img src="{{ col.foto.url }}">
                    <p>{{ col.nome }}</p>
                </div>
            {% endfor %}
        {% else %}
            <p style="font-size:13px;color:#777;">Sem favoritos ainda.</p>
        {% endif %}
    </div>
</section>

<footer>
    <p>Últimas Notícias JC+</p>
    <p>Newsletters • Mobile • Fale conosco</p>
    <img src="{% static 'img/socials.png' %}">
    <p class="copy">© JCPE 2025</p>
</footer>

<nav class="menu-bottom">
    <a href="{% url 'inicial' %}">
        <i class="fa-solid fa-house"></i>
    </a>
    <a href="{% url 'criar_noticia' %}">
        <i class="fa-solid fa-square-plus"></i>
    </a>
    <a href="{% url 'conta' %}">
        <i class="fa-solid fa-bars"></i>
    </a>
</nav>

{% endblock %}

{% load static %}

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JC - Jornal do Commercio</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{% static 'css/style_inicial.css' %}">
</head>
<body>

    <div class="uol-bar">
        <div class="container uol-container">
             <img src="https://conteudo.imguol.com.br/c/_layout/v3/logoUOL2021/logo_completo_white.svg" alt="UOL Logo" class="logo-uol-top">
        </div>
    </div>

    <header>
        <div class="top-bar container">
            <div class="menu-and-logo">
                <div class="menu-icon" onclick="toggleMenu()">
                    <i class="fas fa-bars"></i>
                </div>
                <button class="search-trigger" type="button" onclick="toggleSearchDrawer()" aria-controls="searchDrawer" aria-expanded="false" aria-label="Buscar">
                    <i class="fas fa-search"></i>
                </button>
                <img src="https://jc.uol.com.br/img/logo.svg" alt="JC Logo" class="logo-jc">
            </div>

            <div class="user-area">
                {% if user.is_authenticated %}
                    <a href="{% url 'conta' %}" class="btn-entrar logged-in">
                        <i class="fas fa-user-circle"></i> Minha Conta
                    </a>
                {% else %}
                    <a href="{% url 'login' %}" class="btn-entrar">
                        <i class="far fa-user"></i> Entrar
                    </a>
                {% endif %}
            </div>
        </div>

        <nav class="nav-scroller container">
            <ul>
                <li><a href="{% url 'inicial' %}" class="{% if not request.GET.tag %}active{% endif %}">AO VIVO</a></li>
                {% for t in tags %}
                <li>
                    <a href="{% url 'inicial' %}?tag={{ t.id }}"
                       class="{% if request.GET.tag == t.id|stringformat:'s' %}active{% endif %}">
                        {{ t.tag|upper }}
                    </a>
                </li>
                {% endfor %}
            </ul>
        </nav>
    </header>

    <div class="search-drawer" id="searchDrawer" aria-hidden="true">
        <div class="search-drawer-backdrop" onclick="closeSearchDrawer()"></div>
        <div class="search-drawer-shell">
            <div class="drawer-handle" onclick="toggleSearchDrawer()">
                <i class="fas fa-chevron-down"></i>
            </div>
            <div class="search-card container">
                <form class="search-form" action="{% url 'inicial' %}" method="get">
                    <div class="search-bar-row">
                        <button class="search-submit" type="submit" aria-label="Buscar">
                            <i class="fas fa-search"></i>
                        </button>
                        <input type="text" id="searchInput" name="q" value="{{ q }}" placeholder="O que descobrir hoje?">
                        <button class="search-close-btn" type="button" onclick="closeSearchDrawer()" aria-label="Fechar busca">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>

                    <div class="search-suggestions">
                        {% if recent_searches %}
                            <div class="suggestion-title">Buscas recentes</div>
                            <div class="suggestion-chips">
                                {% for term in recent_searches %}
                                    <a href="{% url 'inicial' %}?q={{ term|urlencode }}" class="suggestion-chip">
                                        <i class="far fa-clock"></i> {{ term }}
                                    </a>
                                {% endfor %}
                            </div>
                        {% else %}
                            <div class="suggestion-title">Sugestoes</div>
                            <div class="suggestion-chips">
                                <a href="{% url 'inicial' %}?q=gasolina" class="suggestion-chip"><i class="far fa-clock"></i> Aumento gasolina hoje</a>
                                <a href="{% url 'inicial' %}?q=Recife%20Antigo" class="suggestion-chip"><i class="far fa-clock"></i> Apresentacoes no Recife Antigo</a>
                                <a href="{% url 'inicial' %}?q=metro%20Recife" class="suggestion-chip"><i class="far fa-clock"></i> Situacao metro do Recife</a>
                                <a href="{% url 'inicial' %}?q=bolo%20de%20rolo" class="suggestion-chip"><i class="far fa-clock"></i> Receitas de bolo de rolo</a>
                            </div>
                        {% endif %}
                    </div>
                </form>

                <div class="search-tags">
                    <div class="search-tags-header">
                        <span>TAGS</span>
                        <i class="fas fa-tag"></i>
                    </div>
                    <div class="tags-list">
                        {% for t in tags %}
                            <a href="{% url 'inicial' %}?tag={{ t.id }}" class="tag-chip">{{ t.tag|capfirst }}</a>
                        {% endfor %}
                    </div>
                </div>

                {% if noticias %}
                <div class="search-highlights">
                    <div class="search-highlights-header">Materias em Alta</div>
                    <div class="search-highlight-list">
                        {% for n in noticias|slice:":3" %}
                        <a href="{% url 'ler_noticia' n.id %}" class="highlight-item">
                            <div class="highlight-thumb">
                                {% if n.imagem %}
                                    <img src="{{ n.imagem.url }}" alt="{{ n.titulo }}">
                                {% elif n.capa %}
                                    <img src="{{ n.capa.url }}" alt="{{ n.titulo }}">
                                {% else %}
                                    <div class="placeholder-img-sm"></div>
                                {% endif %}
                            </div>
                            <div class="highlight-meta">
                                <span class="highlight-tag">{{ n.categoria.categoria|default:"Noticia" }}</span>
                                <h4>{{ n.titulo|truncatechars:70 }}</h4>
                                <span class="highlight-time">{{ n.data_criacao|timesince }} atras</span>
                            </div>
                        </a>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="sidebar" id="sidebar">
        <span class="close-btn" onclick="toggleMenu()">&times;</span>
        <div class="sidebar-header">
            {% if user.is_authenticated %}Olá, {{ user.username }}{% else %}Menu{% endif %}
        </div>
        <a href="{% url 'criar_noticia' %}">+ Criar Notícia</a>
        <a href="{% url 'conta' %}">Perfil</a>
        <a href="{% url 'vizualizar_salvos' %}">Notícias Salvas</a>
        <hr>
        {% if user.is_authenticated %}
            <a href="{% url 'logout' %}">Sair</a>
        {% else %}
             <a href="{% url 'login' %}">Entrar</a>
        {% endif %}
    </div>

    <main class="container content-container">
        {% if q %}
        <div class="search-result-banner">
            <span>Resultados para "{{ q }}"</span>
        </div>
        {% endif %}
       
        {% if noticias %}
            {% if q %}
                <div class="news-grid-section search-results-grid">
                    {% for n in noticias %}
                    <div class="news-card">
                        <a href="{% url 'ler_noticia' n.id %}">
                            <div class="card-image">
                                {% if n.imagem %}
                                    <img src="{{ n.imagem.url }}" alt="{{ n.titulo }}">
                                {% elif n.capa %}
                                    <img src="{{ n.capa.url }}" alt="{{ n.titulo }}">
                                {% else %}
                                    <div class="placeholder-img-sm"></div>
                                {% endif %}
                            </div>
                            <div class="card-content">
                                <span class="card-category">{{ n.categoria.categoria|default:"Noticia" }}</span>
                                <h3>{{ n.titulo|truncatechars:70 }}</h3>
                                <span class="card-time">{{ n.data_criacao|timesince }} atras</span>
                            </div>
                        </a>
                        <div class="card-actions icon-small">
                             <a href="{% url 'salvar_noticia' n.id %}">
                                {% if n.id in noticias_salvas_ids %}
                                    <i class="fas fa-bookmark" style="color: var(--primary-red);"></i>
                                {% else %}
                                    <i class="far fa-bookmark"></i>
                                {% endif %}
                            </a>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            {% else %}
            <div class="carousel-wrapper">
                <div class="carousel-container">
                    {% for n in noticias|slice:":3" %}
                    <div class="carousel-slide {% if forloop.first %}active{% endif %} fade">
                        <article class="hero-news">
                            <a href="{% url 'ler_noticia' n.id %}">
                                <div class="hero-img-container">
                                    {% if n.capa %}
                                        <img src="{{ n.capa.url }}" alt="{{ n.titulo }}">
                                    {% elif n.imagem %}
                                        <img src="{{ n.imagem.url }}" alt="{{ n.titulo }}">
                                    {% else %}
                                        <div class="placeholder-img">JC Imagem</div>
                                    {% endif %}
                                    <div class="hero-overlay">
                                        <span class="category-tag">{{ n.categoria.categoria|default:"DESTAQUE" }}</span>
                                        <h1>{{ n.titulo }}</h1>
                                    </div>
                                </div>
                            </a>
                            <div class="hero-actions">
                                <span><i class="far fa-clock"></i> {{ n.data_criacao|date:"H:i" }}</span>
                                <div class="actions-icons">
                                    <a href="{% url 'salvar_noticia' n.id %}" title="Salvar">
                                        {% if n.id in noticias_salvas_ids %}
                                            <i class="fas fa-bookmark" style="color: var(--primary-red);"></i> {% else %}
                                            <i class="far fa-bookmark"></i> {% endif %}
                                    </a>
                                    <button onclick="shareNews('{{ request.build_absolute_uri }}noticia/{{ n.id }}')">
                                        <i class="fas fa-share-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </article>
                    </div>
                    {% endfor %}
                   
                    <a class="prev" onclick="plusSlides(-1)"><i class="fas fa-chevron-left"></i></a>
        <a class="next" onclick="plusSlides(1)"><i class="fas fa-chevron-right"></i></a>

        <div class="carousel-indicators">
            {% for n in noticias|slice:":3" %}
                <span class="dot {% if forloop.first %}active{% endif %}" onclick="currentSlide({{ forloop.counter }})"></span>
            {% endfor %}
                    </div>
                </div>
            </div>

            <div class="widget-mare">
                <div class="mare-info">
                    <i class="fas fa-water"></i>
                    <div>
                        <strong>Tábua de Marés | Recife</strong>
                        <div class="mare-dados">
                            <a>Colocar a API</a>
                        </div>
                    </div>
                </div>
            </div>

            <div class="news-grid-section">
                {% for n in noticias|slice:"3:" %}
                   
                    {% if forloop.counter0 == 2 %}
                        </div> <div class="ad-container-full">
                            <div class="ad-box">
                                <p>PUBLICIDADE</p>
                                <h3>ANÚNCIO AQUI</h3>
                            </div>
                        </div>

                        <div class="section-title"><span>PERNAMBUCO</span></div>

                        <div class="news-grid-section"> {% endif %}

                    <div class="news-card">
                        <a href="{% url 'ler_noticia' n.id %}">
                            <div class="card-image">
                                {% if n.imagem %}
                                    <img src="{{ n.imagem.url }}" alt="{{ n.titulo }}">
                                {% else %}
                                    <div class="placeholder-img-sm"></div>
                                {% endif %}
                            </div>
                            <div class="card-content">
                                <span class="card-category">{{ n.categoria.categoria|default:"Notícia" }}</span>
                                <h3>{{ n.titulo|truncatechars:70 }}</h3>
                                <span class="card-time">{{ n.data_criacao|timesince }} atrás</span>
                            </div>
                        </a>
                        <div class="card-actions icon-small">
                             <a href="{% url 'salvar_noticia' n.id %}">
                                {% if n.id in noticias_salvas_ids %}
                                    <i class="fas fa-bookmark" style="color: var(--primary-red);"></i>
                                {% else %}
                                    <i class="far fa-bookmark"></i>
                                {% endif %}
                            </a>
                        </div>
                    </div>
                {% endfor %}
            </div>
            {% endif %}

        {% else %}
            <div class="empty-state">
                <p>Nenhuma notícia encontrada.</p>
            </div>
        {% endif %}

    </main>

    <footer>
        <div class="footer-container">
            <div class="footer-products">
                <h4>Nossos Produtos</h4>
                
                <ul class="nossos-produtos">
                    <li>
                        <a href="https://interior.ne10.uol.com.br/">
                            <figure>
                                <img loading="lazy" src="https://sjcc.ne10.uol.com.br/rodape_global/img/ne10interior.webp" alt="NE10 Interior" width="60" height="60" />
                                <figcaption>NE10 Interior</figcaption>
                            </figure>
                        </a>
                    </li>
                    <li>
                        <a href="https://radiojornal.com.br/">
                            <figure>
                                <img loading="lazy" src="https://sjcc.ne10.uol.com.br/rodape_global/img/radio.webp" alt="Rádio Jornal" width="60" height="60" />
                                <figcaption>Rádio Jornal</figcaption>
                            </figure>
                        </a>
                    </li>
                    <li>
                        <a href="https://tvjornal.com.br/">
                            <figure>
                                <img loading="lazy" src="https://sjcc.ne10.uol.com.br/rodape_global/img/tvjornal.webp" alt="TV Jornal" width="60" height="60" />
                                <figcaption>TV Jornal</figcaption>
                            </figure>
                        </a>
                    </li>
                    <li>
                        <a href="https://jc.uol.com.br/">
                            <figure>
                                <img loading="lazy" src="https://sjcc.ne10.uol.com.br/rodape_global/img/jc-novo.webp" alt="Jornal do Commercio" width="60" height="60" />
                                <figcaption>Jornal do Commercio</figcaption>
                            </figure>
                        </a>
                    </li>
                    <li>
                        <a href="https://jc.uol.com.br/blog-do-torcedor/">
                            <figure>
                                <img loading="lazy" src="https://sjcc.ne10.uol.com.br/rodape_global/img/blog_do_torcedor.webp" alt="Blog do Torcedor" width="60" height="60" />
                                <figcaption>Blog do Torcedor</figcaption>
                            </figure>
                        </a>
                    </li>
                    <li>
                        <a href="https://jc.uol.com.br/social1/">
                            <figure>
                                <img loading="lazy" src="https://sjcc.ne10.uol.com.br/rodape_global/img/social.webp" alt="Social1" width="60" height="60" />
                                <figcaption>Social1</figcaption>
                            </figure>
                        </a>
                    </li>
                    <li>
                        <a href="https://receitadaboa.com.br/">
                            <figure>
                                <img loading="lazy" src="https://sjcc.ne10.uol.com.br/rodape_global/img/receita_da_boa.webp" alt="Receita da Boa" width="60" height="60" />
                                <figcaption>Receita da Boa</figcaption>
                            </figure>
                        </a>
                    </li>
                </ul>
            </div>
            </div>
           
            <hr class="footer-divider">

            <div class="footer-brand-social">
                <img src="https://jc.uol.com.br/img/logo.svg" alt="JC Logo" class="footer-logo-img">
                <div class="social-icons">
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-youtube"></i></a>
                    <a href="#"><i class="fab fa-tiktok"></i></a>
                </div>
            </div>

        <div class="footer-links-list">
                <a href="#">Últimas Notícias JC+</a>
                <a href="#">Newsletters Mobile</a>
                <a href="#">Fale Conosco</a>
                <a href="#">Política de Privacidade</a>
            </div>

            <div class="copyright-section">
                <p>&copy; {% now "Y" %} Jornal do Commercio - Todos os direitos reservados.</p>
            </div>

            <div class="footer-jcpm">
                <p>Uma empresa do grupo</p>
                <img src="https://imagens.ne10.uol.com.br/jcpm/logo_jcpm_footer.svg" alt="Grupo JCPM">
            </div>
        </div>
    </footer>

    <script src="{% static 'js/script.js' %}"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil / Login Sidebar</title>

    <style>
        /* --- ESTILOS BASE E SIDEBAR --- */
        body {
            margin: 0;
            background: #f2f2f2;
            font-family: Arial, sans-serif;
        }

        /* 1. BOT√ÉO PRINCIPAL (Sempre abre a sidebar) */
        .open-sidebar-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #b30000;
            color: white;
            border: none;
            padding: 12px 16px;
            border-radius: 10px;
            cursor: pointer;
            font-weight: bold;
            z-index: 200; 
        }
        
        .open-sidebar-btn:hover {
            background: #8a0000;
        }

        /* 2. OVERLAY ESCURO */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.4);
            opacity: 0;
            visibility: hidden;
            transition: 0.3s;
            z-index: 999;
        }

        .overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* 3. SIDEBAR CONTAINER */
        .sidebar {
            position: fixed;
            top: 0;
            right: -380px;
            width: 380px; 
            height: 100%;
            background: white;
            padding: 30px;
            box-shadow: -2px 0 10px rgba(0,0,0,0.2);
            transition: 0.3s;
            z-index: 1000;
            box-sizing: border-box;
            overflow-y: auto;
        }

        .sidebar.active {
            right: 0;
        }

        /* --- ESTILOS DE FORMUL√ÅRIO E COMPONENTES --- */

        /* T√≠tulo */
        .sidebar h2 {
            text-align: center;
            color: #a40000;
            margin-top: 0;
            margin-bottom: 20px;
            font-size: 26px;
        }
        
        /* Mensagens de Erro */
        .messages {
            margin-bottom: 12px;
        }

        .messages p {
            background: #ffd2d2;
            padding: 10px;
            border-radius: 8px;
            color: #8a0000;
            font-size: 14px;
        }

        /* Inputs para Login */
        .input {
            width: 100%;
            padding: 14px;
            border-radius: 10px;
            border: none;
            background: #e4edff;
            margin-bottom: 14px;
            font-size: 15px;
            box-sizing: border-box;
        }

        /* Bot√£o principal (Entrar / Sair) */
        .btn-action {
            width: 100%;
            padding: 14px;
            border-radius: 10px;
            border: none;
            background: #b30000;
            color: white;
            font-size: 17px;
            margin-top: 10px;
            cursor: pointer;
            font-weight: bold;
            display: block;
            text-align: center;
            text-decoration: none;
            box-sizing: border-box;
        }
        
        .btn-action:hover {
            background: #8a0000;
        }

        /* Bot√£o secund√°rio (Criar conta) */
        .btn-secondary {
            margin-top: 15px;
            width: 100%;
            display: block;
            padding: 12px;
            color: #b30000;
            border: 2px solid #b30000;
            border-radius: 10px;
            text-decoration: none;
            font-weight: bold;
            text-align: center;
            box-sizing: border-box;
            background: white;
        }

        .btn-secondary:hover {
            background: #ffeaea;
        }

        /* --- ESTILOS DE PERFIL (Para Usu√°rio Logado) --- */
        .profile-container {
            padding: 10px 0;
        }

        .profile-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 30px;
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            background: #ccc; 
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 10px;
            color: #fff;
            font-size: 40px;
            cursor: pointer;
        }

        .change-photo-link {
            color: #b30000;
            text-decoration: none;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
        }

        .change-photo-link:hover {
            text-decoration: underline;
        }

        /* Blocos de Campos (Nome, Email, Senha) */
        .form-group {
            margin-bottom: 25px;
            position: relative;
        }

        .form-group label {
            display: block;
            color: #444;
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .display-field {
            width: 100%;
            padding: 12px;
            border-radius: 5px;
            border: none;
            background: #e9e9e9;
            margin-bottom: 5px;
            font-size: 15px;
            color: #333;
            pointer-events: none;
            box-sizing: border-box;
            transition: all 0.3s ease;
        }

        .display-field.editable {
            background: #e4edff;
            border: 1px solid #b30000;
            pointer-events: auto;
        }

        .change-link {
            color: #b30000;
            text-decoration: none;
            font-size: 12px;
            cursor: pointer;
            display: inline-block;
            margin-top: 5px;
        }

        .change-link:hover {
            text-decoration: underline;
        }

        /* Bot√µes de confirma√ß√£o/cancelar */
        .edit-buttons {
            display: none;
            gap: 10px;
            margin-top: 10px;
        }

        .edit-buttons.active {
            display: flex;
        }

        .btn-save {
            flex: 1;
            padding: 8px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        .btn-save:hover {
            background: #218838;
        }

        .btn-cancel {
            flex: 1;
            padding: 8px;
            background: #6c757d;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        .btn-cancel:hover {
            background: #5a6268;
        }

        /* --- MODAL PARA FOTO DE PERFIL --- */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .modal h3 {
            color: #a40000;
            margin-top: 0;
            margin-bottom: 20px;
            text-align: center;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .modal-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        .btn-primary {
            background: #b30000;
            color: white;
        }

        .btn-secondary-modal {
            background: #6c757d;
            color: white;
        }

        /* --- ESTILOS PARA TAGS --- */
        .tags-container {
            margin-top: 30px;
            margin-bottom: 40px;
        }

        .tags-container h3 {
            color: #444;
            font-size: 14px;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .tags-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .tag-item {
            background: #e9e9e9; 
            padding: 8px 12px;
            border-radius: 5px;
            color: #333;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 5px;
            user-select: none;
            border: none;
        }

        .tag-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 5px rgba(0,0,0,0.1);
        }

        /* Tag selecionada (vermelha com X) */
        .tag-item.selected {
            background: #b30000;
            color: white;
            padding-right: 8px;
            position: relative;
        }

        .tag-item.selected::after {
            content: "√ó";
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 18px;
            height: 18px;
            margin-left: 5px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            font-size: 16px;
            font-weight: bold;
            transition: background 0.2s;
        }

        .tag-item.selected:hover::after {
            background: rgba(255, 255, 255, 0.5);
        }

        /* Rodap√©: Bot√µes e Redes Sociais */
        .footer-buttons {
            margin-top: 40px;
            padding-top: 20px;
            text-align: center;
        }

        .social-links {
            display: flex;
            justify-content: space-around;
            margin-top: 25px;
            margin-bottom: 10px;
        }

        .social-links a {
            color: #b30000;
            font-size: 30px;
            text-decoration: none;
            cursor: pointer;
        }
        
        .social-links a:hover {
            opacity: 0.8;
        }
        
        .logout-button-container {
            background: #fff;
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .logout-text {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        /* Estilos para mensagens tempor√°rias */
        .temp-message {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 12px 24px;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            z-index: 3000;
            animation: slideDown 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            font-size: 14px;
            text-align: center;
            min-width: 200px;
            max-width: 300px;
        }

        @keyframes slideDown {
            from {
                top: -50px;
                opacity: 0;
            }
            to {
                top: 20px;
                opacity: 1;
            }
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
            }
            to {
                opacity: 0;
            }
        }

    </style>
</head>
<body>

    <button class="open-sidebar-btn" onclick="openSidebar()" id="sidebarBtn">Login</button>

    <div id="overlay" class="overlay" onclick="closeSidebar()"></div>

    <!-- Modal para foto de perfil -->
    <div id="photoModal" class="modal">
        <div class="modal-content">
            <h3>Alterar Foto de Perfil</h3>
            <p>Selecione uma nova imagem para seu perfil:</p>
            <input type="file" id="photoInput" accept="image/*" style="margin: 15px 0; width: 100%;">
            <div class="modal-buttons">
                <button class="modal-btn btn-primary" onclick="savePhoto()">Salvar</button>
                <button class="modal-btn btn-secondary-modal" onclick="closeModal()">Cancelar</button>
            </div>
        </div>
    </div>

    <div id="sidebar" class="sidebar">
        <div id="loginContent">
            <h2>Entrar</h2>
            <form id="loginForm">
                <input type="text" id="loginUsername" placeholder="Usu√°rio" class="input" required>
                <input type="password" id="loginPassword" placeholder="Senha" class="input" required>
                <button type="submit" class="btn-action">Entrar</button>
                <a href="#" class="btn-secondary" onclick="showRegister()">Criar conta</a>
            </form>
        </div>

        <div id="profileContent" style="display: none;">
            <div class="profile-container">
                <div class="profile-header">
                    <div class="profile-avatar" title="Clique para alterar" onclick="openPhotoModal()">üë§</div>
                    <a href="#" class="change-photo-link" onclick="openPhotoModal(); return false;">Alterar foto de perfil</a>
                </div>

                <div class="form-group" id="usernameGroup">
                    <label>Nome de Usu√°rio</label>
                    <input type="text" id="usernameInput" value="Usu√°rio Teste" class="display-field" readonly>
                    <a href="#" class="change-link" onclick="enableEdit('username'); return false;">Alterar nome de usu√°rio</a>
                    <div class="edit-buttons" id="usernameButtons">
                        <button class="btn-save" onclick="saveEdit('username')">Salvar</button>
                        <button class="btn-cancel" onclick="cancelEdit('username')">Cancelar</button>
                    </div>
                </div>
                
                <div class="form-group" id="emailGroup">
                    <label>E-mail</label>
                    <input type="email" id="emailInput" value="email@exemplo.com" class="display-field" readonly>
                    <a href="#" class="change-link" onclick="enableEdit('email'); return false;">Alterar e-mail</a>
                    <div class="edit-buttons" id="emailButtons">
                        <button class="btn-save" onclick="saveEdit('email')">Salvar</button>
                        <button class="btn-cancel" onclick="cancelEdit('email')">Cancelar</button>
                    </div>
                </div>

                <div class="form-group" id="passwordGroup">
                    <label>Senha</label>
                    <input type="password" id="passwordInput" value="********" class="display-field" readonly>
                    <a href="#" class="change-link" onclick="enableEdit('password'); return false;">Alterar senha</a>
                    <div class="edit-buttons" id="passwordButtons">
                        <button class="btn-save" onclick="saveEdit('password')">Salvar</button>
                        <button class="btn-cancel" onclick="cancelEdit('password')">Cancelar</button>
                    </div>
                </div>

                <div class="tags-container">
                    <h3>Tags de Interesse</h3>
                    <div class="tags-list" id="tagsList">
                        <!-- Tags ser√£o carregadas via JavaScript -->
                        <div class="loading-tags">Carregando tags...</div>
                    </div>
                    <p style="font-size: 11px; color: #666; margin-top: 10px;">
                        As tags s√£o salvas automaticamente no seu navegador.
                    </p>
                </div>

                <div class="footer-buttons">
                    <div class="logout-button-container">
                         <button class="btn-action" style="margin-top: 0; background: #b30000;" onclick="logout()">Sair da Conta</button>
                         <p class="logout-text">Op√ß√µes de conta</p>
                    </div>

                    <div class="social-links">
                        <a href="#">üì∏</a>
                        <a href="#">üí¨</a>
                        <a href="#">üé∂</a>
                        <a href="#">üìß</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sistema de autentica√ß√£o SIMULADO
        let isLoggedIn = false;
        let currentUser = null;

        // Dados de exemplo
        const SAMPLE_USER = {
            username: 'Usu√°rio Teste',
            email: 'email@exemplo.com'
        };

        // Sistema de tags usando apenas JavaScript e localStorage
        const TAGS_DATA = [
            {id: 'educacao', name: 'Educa√ß√£o'},
            {id: 'cinema', name: 'Cinema'},
            {id: 'esportes', name: 'Esportes'},
            {id: 'mundo', name: 'Mundo'},
            {id: 'tech', name: 'Tech'},
            {id: 'politica', name: 'Pol√≠tica'},
            {id: 'musica', name: 'M√∫sica'},
            {id: 'games', name: 'Games'},
            {id: 'arte', name: 'Arte'},
            {id: 'ciencia', name: 'Ci√™ncia'}
        ];

        // Fun√ß√µes da Sidebar
        function openSidebar() {
            document.getElementById("sidebar").classList.add("active");
            document.getElementById("overlay").classList.add("active");
            
            // Carregar tags quando abrir a sidebar
            if (isLoggedIn) {
                loadTags();
            }
        }

        function closeSidebar() {
            document.getElementById("sidebar").classList.remove("active");
            document.getElementById("overlay").classList.remove("active");
        }

        // Sistema de login/logout SIMULADO
        function checkLoginStatus() {
            // Verificar se h√° usu√°rio salvo no localStorage
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                isLoggedIn = true;
                currentUser = JSON.parse(savedUser);
                document.getElementById('sidebarBtn').textContent = 'Minha Conta';
                document.getElementById('loginContent').style.display = 'none';
                document.getElementById('profileContent').style.display = 'block';
                
                // Preencher dados do usu√°rio
                document.getElementById('usernameInput').value = currentUser.username;
                document.getElementById('emailInput').value = currentUser.email;
            } else {
                isLoggedIn = false;
                currentUser = null;
                document.getElementById('sidebarBtn').textContent = 'Login';
                document.getElementById('loginContent').style.display = 'block';
                document.getElementById('profileContent').style.display = 'none';
            }
        }

        // Formul√°rio de login
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;
            
            if (username && password) {
                // Simula√ß√£o de login bem-sucedido
                currentUser = {
                    username: username,
                    email: `${username}@exemplo.com`
                };
                
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                showMessage('Login realizado com sucesso!', 'success');
                checkLoginStatus();
                closeSidebar();
            } else {
                showMessage('Preencha todos os campos.', 'error');
            }
        });

        function logout() {
            localStorage.removeItem('currentUser');
            isLoggedIn = false;
            currentUser = null;
            showMessage('Logout realizado com sucesso!', 'success');
            checkLoginStatus();
            closeSidebar();
        }

        function showRegister() {
            showMessage('Funcionalidade de registro em desenvolvimento.', 'info');
        }

        // Fun√ß√µes do Modal de Foto
        function openPhotoModal() {
            document.getElementById("photoModal").classList.add("active");
        }

        function closeModal() {
            document.getElementById("photoModal").classList.remove("active");
            document.getElementById("photoInput").value = '';
        }

        function savePhoto() {
            const fileInput = document.getElementById("photoInput");
            const file = fileInput.files[0];
            
            if (file) {
                // Simula√ß√£o para teste
                showMessage('Foto alterada com sucesso! (Simula√ß√£o)', 'success');
                document.querySelector('.profile-avatar').innerHTML = 'üñºÔ∏è';
                closeModal();
            } else {
                alert('Por favor, selecione uma imagem.');
            }
        }

        // Fun√ß√µes de Edi√ß√£o de Campos
        function enableEdit(field) {
            const input = document.getElementById(field + 'Input');
            const buttons = document.getElementById(field + 'Buttons');
            const changeLink = input.nextElementSibling;
            
            window.originalValues = window.originalValues || {};
            window.originalValues[field] = input.value;
            
            input.classList.add('editable');
            input.readOnly = false;
            
            if (field === 'password') {
                input.type = 'password';
                input.value = '';
                input.placeholder = 'Digite a nova senha';
            }
            
            changeLink.style.display = 'none';
            buttons.classList.add('active');
            input.focus();
        }

        function saveEdit(field) {
            const input = document.getElementById(field + 'Input');
            const buttons = document.getElementById(field + 'Buttons');
            const changeLink = buttons.previousElementSibling;
            const newValue = input.value.trim();
            
            if (!newValue) {
                alert('Por favor, preencha o campo.');
                return;
            }
            
            // Valida√ß√µes b√°sicas
            if (field === 'email' && !validateEmail(newValue)) {
                alert('Por favor, insira um e-mail v√°lido.');
                return;
            }
            
            if (field === 'password' && newValue.length < 6) {
                alert('A senha deve ter pelo menos 6 caracteres.');
                return;
            }
            
            // Simula√ß√£o de salvamento
            showMessage(`${field === 'username' ? 'Nome de usu√°rio' : field === 'email' ? 'E-mail' : 'Senha'} atualizado com sucesso!`, 'success');
            
            if (field === 'password') {
                input.type = 'password';
                input.value = '********';
                input.placeholder = '';
            } else {
                // Atualizar usu√°rio no localStorage
                if (currentUser) {
                    currentUser[field] = newValue;
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                }
            }
            
            input.classList.remove('editable');
            input.readOnly = true;
            buttons.classList.remove('active');
            changeLink.style.display = 'inline-block';
        }

        function cancelEdit(field) {
            const input = document.getElementById(field + 'Input');
            const buttons = document.getElementById(field + 'Buttons');
            const changeLink = buttons.previousElementSibling;
            
            if (field === 'password') {
                input.value = '********';
                input.type = 'password';
            } else if (window.originalValues && window.originalValues[field]) {
                input.value = window.originalValues[field];
            }
            
            input.classList.remove('editable');
            input.readOnly = true;
            buttons.classList.remove('active');
            changeLink.style.display = 'inline-block';
        }

        // Valida√ß√£o de e-mail
        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }

        // Sistema de tags
        function loadTags() {
            const tagsList = document.getElementById('tagsList');
            if (!tagsList) return;
            
            // Carregar tags selecionadas do localStorage
            const savedTags = JSON.parse(localStorage.getItem('selectedTags') || '[]');
            
            // Limpar conte√∫do de loading
            tagsList.innerHTML = '';
            
            // Adicionar tags
            TAGS_DATA.forEach(tag => {
                const isSelected = savedTags.includes(tag.id);
                const tagElement = document.createElement('button');
                tagElement.type = 'button';
                tagElement.className = 'tag-item';
                if (isSelected) tagElement.classList.add('selected');
                tagElement.setAttribute('data-tag', tag.id);
                tagElement.setAttribute('data-name', tag.name);
                tagElement.textContent = tag.name;
                tagElement.title = `Clique para ${isSelected ? 'remover' : 'adicionar'} esta tag`;
                tagsList.appendChild(tagElement);
            });
            
            // Adicionar eventos √†s tags
            setupTagEvents();
        }

        function setupTagEvents() {
            const tags = document.querySelectorAll('.tag-item');
            
            tags.forEach(tag => {
                tag.addEventListener('click', function() {
                    const tagId = this.getAttribute('data-tag');
                    const tagName = this.getAttribute('data-name');
                    const isSelected = this.classList.contains('selected');
                    
                    // Alternar visualmente
                    this.classList.toggle('selected');
                    
                    // Atualizar localStorage
                    updateLocalStorageTags();
                    
                    // Mostrar mensagem
                    showMessage(
                        `Tag "${tagName}" ${isSelected ? 'removida' : 'adicionada'}!`, 
                        'success'
                    );
                });
            });
        }

        function updateLocalStorageTags() {
            const tags = document.querySelectorAll('.tag-item');
            const selectedTags = [];
            tags.forEach(tag => {
                if (tag.classList.contains('selected')) {
                    selectedTags.push(tag.getAttribute('data-tag'));
                }
            });
            localStorage.setItem('selectedTags', JSON.stringify(selectedTags));
        }

        // Fun√ß√£o para mostrar mensagens
        function showMessage(text, type) {
            // Remover mensagens anteriores
            const existingMessages = document.querySelectorAll('.temp-message');
            existingMessages.forEach(msg => msg.remove());
            
            // Cores para diferentes tipos
            const colors = {
                'success': '#28a745',
                'error': '#dc3545',
                'info': '#17a2b8',
                'warning': '#ffc107'
            };
            
            // Criar nova mensagem
            const messageDiv = document.createElement('div');
            messageDiv.className = `temp-message ${type}`;
            messageDiv.textContent = text;
            messageDiv.style.background = colors[type] || colors.info;
            
            document.body.appendChild(messageDiv);
            
            // Remover ap√≥s 3 segundos
            setTimeout(() => {
                if (messageDiv.parentNode) {
                    messageDiv.style.animation = 'fadeOut 0.3s ease';
                    setTimeout(() => {
                        if (messageDiv.parentNode) {
                            messageDiv.remove();
                        }
                    }, 300);
                }
            }, 3000);
        }

        // Fechar sidebar e modal com ESC
        document.addEventListener('keydown', function(event) {
            if (event.target.tagName !== 'INPUT' && event.key === 'Escape') {
                closeSidebar();
                closeModal();
            }
        });

        // Fechar modal ao clicar fora
        document.getElementById('photoModal').addEventListener('click', function(event) {
            if (event.target === this) {
                closeModal();
            }
        });

        // Inicializar quando a p√°gina carregar
        document.addEventListener('DOMContentLoaded', function() {
            checkLoginStatus();
        });

    </script>

</body>
</html>
{% load static %}

<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Painel de Perfil (interativo)</title>
<style>
  :root{ --accent:#e1a722; --bg:#f3f3f3; }
  body { margin: 0; font-family: Arial, sans-serif; background: #e6e6e6; }

  /* botÃ£o que abre a sidebar (exemplo) */
  .open-btn{
    position: fixed; top: 16px; right: 16px; z-index: 60;
    background: var(--accent); color: white; border: none; padding: 10px 12px; border-radius: 8px; cursor: pointer;
  }

  /* overlay (aparece quando a sidebar abre) */
  .overlay{
    position: fixed; inset: 0; background: rgba(0,0,0,0.4); z-index: 50; opacity: 0; pointer-events: none; transition: opacity .25s ease;
  }
  .overlay.visible{ opacity: 1; pointer-events: auto; }

  .sidebar {
    position: fixed; top: 0; right: 0; width: 50vw; max-width: 560px; height: 100vh; background: var(--bg);
    border-left: 4px solid var(--accent); box-shadow: -8px 0 30px rgba(0,0,0,0.25); padding: 24px; overflow-y: auto;
    transform: translateX(110%); transition: transform .32s cubic-bezier(.2,.9,.3,1); z-index: 55; border-bottom-left-radius: 20px; border-top-left-radius: 20px;
  }
  .sidebar.open{ transform: translateX(0%); }

  .perfil-header{ display:flex; flex-direction:column; align-items:center; gap:8px; }
  .perfil-icon{ width:86px; height:86px; border-radius:50%; background:#ddd; display:flex; align-items:center; justify-content:center; font-size:30px; color:#666; overflow:hidden; }
  .perfil-icon img{ width:100%; height:100%; object-fit:cover; }
  .small-link{ color:#b22222; font-size:13px; cursor:pointer; }

  .input-group{ margin-top:14px; }
  label{ display:block; font-size:13px; color:#666; margin-bottom:6px; }
  input[type=text], input[type=email], input[type=password]{ width:100%; padding:10px; border-radius:8px; border:none; background:#d9d9d9; }

  .tags{ margin-top:12px; display:flex; flex-wrap:wrap; gap:8px; }
  .tag{ padding:7px 12px; background:#d0d0d0; border-radius:12px; font-size:13px; cursor:pointer; user-select:none; }
  .tag.active{ background: #bfa06e; color:white; }

  .login-btn{ display:block; width:100%; margin:20px 0 8px; padding:12px; border:none; background:white; border-radius:10px; color:#8a0000; font-weight:700; cursor:pointer; }
  .alt-text{ text-align:center; font-size:13px; color:#666; margin-top:-4px; }
  .socials{ display:flex; justify-content:center; gap:18px; margin-top:16px; }
  .socials button{ background:transparent;border:none;font-size:20px; cursor:pointer; }

  .close-btn{ position:absolute; top:10px; right:12px; background:transparent; border:2px solid rgba(0,0,0,0.08); padding:6px; border-radius:8px; cursor:pointer; }

  /* responsivo */
  @media(max-width:600px){ .sidebar{ width: 90vw; } }
</style>
</head>
<body>

<button class="open-btn" id="openBtn">Perfil</button>
<div class="overlay" id="overlay" tabindex="-1" aria-hidden="true"></div>

<aside class="sidebar" id="sidebar" aria-hidden="true" role="dialog" aria-label="Painel do usuÃ¡rio">
  <button class="close-btn" id="closeBtn" aria-label="Fechar">âœ•</button>

  <div class="perfil-header">
    <div class="perfil-icon" id="avatar">
      <img id="avatarImg" src="" alt="Avatar" style="display:none;">
      <span id="avatarPlaceholder">ðŸ‘¤</span>
    </div>
    <div class="small-link" id="changePhotoBtn">Alterar foto de perfil</div>
    <input type="file" id="photoInput" accept="image/*" style="display:none;" />
  </div>

  <form id="profileForm" onsubmit="return false;" aria-describedby="formHelp">
    <div class="input-group">
      <label for="username">Nome de UsuÃ¡rio</label>
      <input id="username" type="text" placeholder="Alterar nome de usuÃ¡rio" />
    </div>

    <div class="input-group">
      <label for="email">E-mail</label>
      <input id="email" type="email" placeholder="Alterar e-mail" />
    </div>

    <div class="input-group">
      <label for="senha">Senha</label>
      <input id="senha" type="password" placeholder="Alterar senha" />
    </div>

    <p style="margin-top:14px; font-weight:700; color:#8a0000;">Tags</p>
    <div class="tags" id="tags">
      <div class="tag">jornalismo</div>
      <div class="tag">polÃ­tica</div>
      <div class="tag">esportes</div>
      <div class="tag">cultura</div>
      <div class="tag">mundo</div>
      <div class="tag">tecnologia</div>
    </div>

    <button class="login-btn" id="loginBtn" type="button">Fazer login</button>
    <p class="alt-text">Ou cadastre-se</p>

    <div class="socials">
      <button type="button" aria-label="Instagram" data-link="https://www.instagram.com/jc_pe/?hl=en">
        <img src="{% static 'img/instagram.png' %}" alt="Instagram" style="width:26px; height:26px;">
      </button>
      <button type="button" aria-label="X" data-link="https://x.com/jc_pe?lang=en">
        <img src="{% static 'img/x.png' %}" style="width:26px; height:26px;">
      </button>
      <button type="button" aria-label="TikTok" data-link="https://www.tiktok.com/@jc_pe?lang=en">
        <img src="{% static 'img/tiktok.png' %}" alt="TikTok" style="width:26px; height:26px;">
      </button>
    </div>
  </form>

</aside>

<script>
  const openBtn = document.getElementById('openBtn');
  const sidebar = document.getElementById('sidebar');
  const overlay = document.getElementById('overlay');
  const closeBtn = document.getElementById('closeBtn');
  const loginBtn = document.getElementById('loginBtn');
  const changePhotoBtn = document.getElementById('changePhotoBtn');
  const photoInput = document.getElementById('photoInput');
  const avatarImg = document.getElementById('avatarImg');
  const avatarPlaceholder = document.getElementById('avatarPlaceholder');

  function openSidebar(){
    sidebar.classList.add('open'); overlay.classList.add('visible'); sidebar.setAttribute('aria-hidden','false'); overlay.setAttribute('aria-hidden','false');
    sidebar.querySelector('input, button, [tabindex]')?.focus();
  }
  function closeSidebar(){
    sidebar.classList.remove('open'); overlay.classList.remove('visible'); sidebar.setAttribute('aria-hidden','true'); overlay.setAttribute('aria-hidden','true');
    openBtn.focus();
  }

  openBtn.addEventListener('click', openSidebar);
  closeBtn.addEventListener('click', closeSidebar);
  overlay.addEventListener('click', closeSidebar);
  document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape' && sidebar.classList.contains('open')) closeSidebar(); });

  loginBtn.addEventListener('click', ()=>{
    const username = document.getElementById('username').value.trim();
    const email = document.getElementById('email').value.trim();

    if(!username || !email){
      alert('Preencha pelo menos nome e e-mail (demo).');
      return;
    }

    alert('Dados enviados (demo): ' + username + ' â€” ' + email);
    closeSidebar();
  });


  changePhotoBtn.addEventListener('click', ()=> photoInput.click());
  photoInput.addEventListener('change', (ev)=>{
    const file = ev.target.files && ev.target.files[0];
    if(!file) return;
    const reader = new FileReader();
    reader.onload = function(e){ avatarImg.src = e.target.result; avatarImg.style.display='block'; avatarPlaceholder.style.display='none'; };
    reader.readAsDataURL(file);
  });

  document.querySelectorAll('.tag').forEach(tag => {
    tag.addEventListener('click', ()=> tag.classList.toggle('active'));
  });


  document.querySelectorAll('.socials button[data-link]').forEach(btn=>{
    btn.addEventListener('click', ()=> window.open(btn.dataset.link, '_blank'));
  });
  document.getElementById('emailBtn').addEventListener('click', ()=> location.href = 'mailto:contato@exemplo.com');

</script>
</body>
</html>
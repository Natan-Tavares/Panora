{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Not√≠cias Salvas - JCPE</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="icon" href="{% static 'img/logo_jcpe.png' %}">
    <style>
        /* Pequeno estilo inline para o exemplo ‚Äî remova se usar seu css */
        .container { max-width: 900px; margin: 30px auto; padding: 0 15px; }
        .card { border: 1px solid #ddd; padding: 16px; border-radius: 8px; margin-bottom: 14px; background: #fff; }
        .card h2 { margin: 0 0 8px; font-size: 1.25rem; }
        .meta { color: #666; font-size: 0.9rem; margin-bottom: 10px; }
        .excerpt { margin-bottom: 12px; color: #333; }
        .actions { display: flex; gap: 8px; }
        .button { display: inline-block; padding: 8px 12px; border-radius: 6px; text-decoration: none; border: 1px solid #ccc; background:#f5f5f5; }
        .button.excluir { border-color: #e74c3c; color: #e74c3c; }
        .empty { text-align: center; color:#555; padding: 30px 0; }
    </style>
</head>
<body>
    <header class="container">
        <a href="{% url 'inicial' %}">
            <img src="{% static 'img/logo_jcpe.png' %}" alt="Logo JCPE" class="logo" style="height:56px;">
        </a>
        <h1>JCPE - Not√≠cias salvas</h1>
    </header>

    <main class="container">
        {% if noticias_salvas %}
            {% for item in noticias_salvas %}
                <article class="card">
                    <h2>{{ item.noticia.titulo }}</h2>
                    <div class="meta">
                        Autor: {{ item.noticia.autor }} |
                        Publicada: {{ item.noticia.data_criacao|date:"d/m/Y H:i" }}
                    </div>

                    <p class="excerpt">
                        {% if item.noticia.materia|length > 300 %}
                            {{ item.noticia.materia|slice:":300" }}...
                        {% else %}
                            {{ item.noticia.materia }}
                        {% endif %}
                    </p>

                    <div class="actions">
                        <a href="{% url 'ler_noticia' item.noticia.id %}" class="button">üîç Ler</a>

                        <form action="{% url 'apagar_salvos' item.id %}" method="POST" style="display:inline;">
                            {% csrf_token %}
                            <button type="submit" class="button excluir">‚ùå Remover</button>
                        </form>
                    </div>
                </article>
            {% endfor %}
        {% else %}
            <div class="empty">
                <p>Voc√™ ainda n√£o salvou nenhuma not√≠cia.</p>
                <p><a href="{% url 'inicial' %}" class="button">Voltar √† p√°gina inicial</a></p>
            </div>
        {% endif %}
    </main>


    <footer class="container" style="text-align:center; margin-top:30px;">
        &copy; 2025 JCPE - Todos os direitos reservados.
    </footer>
</body>
</html>
